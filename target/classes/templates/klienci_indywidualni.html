<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Klienci indywidualni</title>

<link rel="stylesheet" href="style.css">

</head>
<body>
<div id="nadtlo">
		<img id="tlo" src="theme.jpg"/>
	</div>
	<div id="headerX">
	</div>
	<div id="header">
		<div class="menuX"><img src="tenis.png" width="32"/></div>
		<div class="menu"><img src="konto.png" width="24"/>  Pracownicy</div>
		<div class="menu"><img src="mone.png" width="24"/>  Pensje</div>
		<div class="menu">
			<img src="equipmnet.png" width="24"/>   Inwentaż <br />
			<div id="rozwin">
				<img src="equipmnet.png" width="24"/>   Pilki <br />
				<img src="equipmnet.png" width="24"/>   Rakiety <br />
			</div>
		</div>
		<div class="menu"><img src="office.png" width="24"/>   Biura</div>
		<div class="menu"><img src="court.png" width="24"/>   Korty</div>
		<div class="menu"><img src="calendar.png" width="24"/>   Rezerwacje</div>
		<div class="menu"><img src="calendar.png" width="24"/>   Wypożyczenia</div>
		
		<div class="menuL"><img src="konto.png" width="18"/>   Logowanie</div>
	</div>

<body>
	<div align = "center">
		<h1>Zarządzanie klientami indywidualnymi</h1>
		<a style = "color : red" id="komunikat"></a> <a style = "color : green" id="powodzenie"></a><br>

		
	
		<a href="\nowy_klient_indywidualny"> Zarejestruj nowego klienta</a>
		<br/>
		<!--Table -->
			<table id="table" border = "1" cellpadding = "10">
			<!-–border –obramowanie, cellpadding –rozmiar komórki -->
			<!--Table header -->
			<thead>
				<tr>
				<!--Table row -->
					<th>ID Klienta</th>
					<!–-Table column -->
					<th>Imię</th>
					<th>Nazwisko</th>		
					<th>Drugie imię</th>							
					<th>Płeć</th>
					
				</tr>
			</thead>
			<!--Table body -->
				<tbody>
					<tr th:each = "klient : ${listaKlientow_indywidualnych}">
						<td th:text = "${klient.id_klienta_indywidualnego}">ID Klienta</td>
						<td th:text = "${klient.imie}">Imię</td>
						<td th:text = "${klient.nazwisko}">Nazwisko</td>
						<td th:text = "${klient.drugieImie}">Drugie imię</td>
						<td th:text = "${klient.plec}">Nazwisko</td>
						<td><a th:href="@{'/edytuj_klienta_indywidualnego?klient_indywidualny=' + ${klient.id_klienta_indywidualnego}}"> Edit</a></td>
						<td><a th:href="@{'/szczegoly_klienta_indywidualnego?klient_indywidualny=' + ${klient.id_klienta_indywidualnego}}"> Szczegoly</a></td>
						<td><a th:href= "@{/usun_klienta_indywidualnego?klient_indywidualny=} + ${klient.id_klienta_indywidualnego}">Usuń</a></td>
						
					</tr>
				</tbody>
			</table> 
		
			
			
	</div>
	<script>
	
		
		var numbers = parseInt(document.getElementById("ilosc").innerHTML);
		var currentPos = 0;
		var state = "";
		
		refresh(true);
		
		start();
		errors();
		
		function start(){
			var adres = decodeURIComponent(window.location.href);
			var adresZn = adres.split('');
			
			var nciag="";
			var wartosc = "";
			
			var startRead = false;
			var startReadWartosc = false;
			
			var error = false;
			var error1 = false;
			var success = false;
			
			for(var n=0;n<adres.length;n++){
				if(startReadWartosc){
					if(adresZn[n] == "_"){
						wartosc = wartosc + " ";
					}else{
						wartosc = wartosc + adresZn[n];
					}
					
					
				}else if(startRead){
					nciag = nciag + adresZn[n];
				}
				
				if(adresZn[n] == "?"){
					startRead = true;
				}
				
				if(nciag =="search="){
					startReadWartosc = true;
				}
			
			}
			
		}
		
		function errors(){
			
		
			var komunikat = "";
			var start = false;

			var adres = window.location.href;
			
			for(var n=0; n< adres.length; n++){
				var znak = adres[n];
				
				if(start){
					komunikat = komunikat + znak;	
				}
				
				if(znak + "" == "?"){
					start = true;
				}
					
			}
			
			
			
			var adres = window.location.href;
			var komunikat = "";
			var start = false;
			
			for(var n=0; n< adres.length; n++){
				var znak = adres[n];
				
				if(start){
					komunikat = komunikat + znak;	
				}
				
				if(znak + "" == "?"){
					start = true;
				}
					
			}
				
			
			
			if(start){
				if(komunikat == "niedozwoloneZnaki" || komunikat == "error"){
					document.getElementById("komunikat").innerHTML = "Użyto niedozwolonych znaków";
					document.getElementById("table").style.visibility = "hidden";
				}
			
				
				if(komunikat == "success"){
					document.getElementById("powodzenie").innerHTML = "Operacja zakonczona sukcesem";
				}
				
				
					
				if(komunikat == "error"){
					document.getElementById("komunikat").innerHTML = "Użyto niedozwolonych znaków";
				}
				
				if(komunikat == "brakNazwy"){
					document.getElementById("komunikat").innerHTML = "Nie podano imienia";
				}
				if(komunikat == "pustaUlica"){
					document.getElementById("komunikat").innerHTML = "Nie podano nazwy ulicy";
				}
				if(komunikat == "pustaMiejscowosc"){
					document.getElementById("komunikat").innerHTML = "Nie podano miejscowości";
				}
				if(komunikat == "zlyNumerTelefonu"){
					document.getElementById("komunikat").innerHTML = "Podano nieprawidłowy numer telefonu";
				}
				if(komunikat == "zlyAdresEmail"){
					document.getElementById("komunikat").innerHTML = "Podano nieprawidłowy adres email" 	
				}
				if(komunikat == "zlyNumerMieszkania"){
					document.getElementById("komunikat").innerHTML = "Podano zły numer telefonu" 	
				}
				if(komunikat == "zlyNumerBudynku"){
					document.getElementById("komunikat").innerHTML = "Podano zły numer budynku" 	
				}
				if(komunikat == "zleNazwisko"){
					document.getElementById("komunikat").innerHTML = "Podano złe nazwisko" 	
				}
				if(komunikat == "zleDrugieImie"){
					document.getElementById("komunikat").innerHTML = "Podano złe drugie imie "	
				}
				
				if(komunikat == "success"){
					document.getElementById("powodzenie").innerHTML ="<img width=20 src='success.png' /> " + document.getElementById("powodzenie").innerHTML;
				}else if(document.getElementById("komunikat").innerText.length != 0){
					document.getElementById("komunikat").innerHTML ="<img width=20 src='error.png' /> " + document.getElementById("komunikat").innerHTML;
				}
					
			}
			

			if(document.getElementById("ilosc").innerHTML == 0 && start && komunikat != "success"){
				document.getElementById("komunikat").innerHTML = "Nie odnaleziono pasujących wyników";
			}
			
			if(komunikat == "success"){
				document.getElementById("powodzenie").innerHTML ="<img width=20 src='success.png' /> " + document.getElementById("powodzenie").innerHTML;
			}else if(document.getElementById("komunikat").innerText.length != 0){
				document.getElementById("komunikat").innerHTML ="<img width=20 src='error.png' /> " + document.getElementById("komunikat").innerHTML;
			}
			
		}
		
		function add(){
			if(currentPos + 5 < numbers){
				currentPos += 5;	
			}
			refresh(false);
		}
		
		function find(){
			
			var szukaj = document.getElementById("szukanie").value;

			window.location.href = "/pilki?search="+ szukaj;
		}
		
		function sub(){
			if(currentPos - 5 >=0){
				currentPos -= 5;	
			}
			refresh(false);
		}
		
		function refresh(starter){
			
			for(var n=0;n<numbers;n++){
				var names = "pole"+n;
				
				
				if(starter){
					state = document.getElementById(names).style.display;
				}
				if(n>= currentPos && n< currentPos + 5){
					document.getElementById(names).style.display = state;
				}else{
					document.getElementById(names).style.display = "none";
				}
			}
			
			document.getElementById("pozycja").innerHTML = currentPos + " - " + (currentPos + 5)
		}
	</script>
	
